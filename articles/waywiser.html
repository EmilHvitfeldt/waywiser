<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="waywiser">
<title>Assessing Models with Waywiser • waywiser</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><link href="../deps/Noto_Sans-0.4.5/font.css" rel="stylesheet">
<link href="../deps/Patua_One-0.4.5/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Assessing Models with Waywiser">
<meta property="og:description" content="waywiser">
<meta property="og:image" content="https://mikemahoney218.github.io/waywiser/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">waywiser</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/waywiser.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/multi-scale-assessment.html">Multi-scale model assessment</a>
    <a class="dropdown-item" href="../articles/residual-autocorrelation.html">Calculating residual spatial autocorrelation</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/mikemahoney218/waywiser/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="waywiser_files/kePrint-0.0.1/kePrint.js"></script><link href="waywiser_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Assessing Models with Waywiser</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/mikemahoney218/waywiser/blob/HEAD/vignettes/waywiser.Rmd" class="external-link"><code>vignettes/waywiser.Rmd</code></a></small>
      <div class="d-none name"><code>waywiser.Rmd</code></div>
    </div>

    
    
<p>The waywiser package aims to be an ergonomic toolbox providing a
consistent user interface for assessing spatial models. To that end,
waywiser does three main things:</p>
<ol style="list-style-type: decimal">
<li>Provides new <a href="https://yardstick.tidymodels.org/" class="external-link">yardstick</a> extensions,
making it easier to use performance metrics from the spatial modeling
literature via a standardized API.</li>
<li>Provides a new function, <code><a href="../reference/ww_multi_scale.html">ww_multi_scale()</a></code>, which makes
it easy to see how model performance metrics change when predictions are
aggregated to various scales.</li>
<li>Provides an implementation of the <a href="https://doi.org/10.1111/2041-210X.13650" class="external-link">area of applicability
from Meyer and Pebesma 2021</a>, extending this tool to work with
tidymodels infrastructure.</li>
</ol>
<p>This vignette will walk through each of these goals in turn. Before
we do that, let’s set up the data we’ll use in examples:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/mikemahoney218/waywiser" class="external-link">waywiser</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">worldclim_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span></span>
<span>  <span class="va">response</span> <span class="op">~</span> <span class="va">bio2</span> <span class="op">+</span> <span class="va">bio10</span> <span class="op">+</span> <span class="va">bio13</span> <span class="op">+</span> <span class="va">bio19</span>, </span>
<span>  <span class="va">worldclim_simulation</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">worldclim_simulation</span><span class="op">$</span><span class="va">predictions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span></span>
<span>  <span class="va">worldclim_model</span>,</span>
<span>  <span class="va">worldclim_simulation</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">worldclim_simulation</span><span class="op">)</span></span>
<span><span class="co">#&gt; Simple feature collection with 6 features and 6 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: -76.77327 ymin: -28.37814 xmax: 135.1108 ymax: 82.8109</span></span>
<span><span class="co">#&gt; CRS:           +proj=longlat +datum=WGS84 +no_defs</span></span>
<span><span class="co">#&gt;   bio2 bio10 bio13 bio19                    geometry   response predictions</span></span>
<span><span class="co">#&gt; 1   66     0    22    24    POINT (-42.8052 82.8109) 0.32833495   0.4290463</span></span>
<span><span class="co">#&gt; 2  111   148   130    62   POINT (135.1108 54.12693) 0.47211614   0.4230675</span></span>
<span><span class="co">#&gt; 3  135   279    28    63  POINT (120.6066 -28.37814) 0.56919133   0.5216524</span></span>
<span><span class="co">#&gt; 4   66   -16    28    38  POINT (-34.46038 82.05372) 0.29898889   0.4300780</span></span>
<span><span class="co">#&gt; 5  114   127     6    12 POINT (-69.94962 -26.10663) 0.77835080   0.5477976</span></span>
<span><span class="co">#&gt; 6  104   155   272   690  POINT (-76.77327 2.443002) 0.02898094   0.1904173</span></span></code></pre></div>
<div class="section level2">
<h2 id="yardstick-extensions">Yardstick Extensions<a class="anchor" aria-label="anchor" href="#yardstick-extensions"></a>
</h2>
<p>First and foremost, waywiser provides a host of new yardstick metrics
to provide a standardized interface for various performance metrics.</p>
<p>All of these functions work more or less the same way: you provide
your data, the names of your “true” values and predicted values, and get
back a standardized output format. As usual with yardstick, that output
can either be a tibble or a vector output. For instance, if we want to
calculate the agreement coefficient from <a href="https://doi.org/10.14358/PERS.72.7.823" class="external-link">Ji and Gallo 2006</a>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ww_agreement_coefficient.html">ww_agreement_coefficient</a></span><span class="op">(</span></span>
<span>  <span class="va">worldclim_simulation</span>,</span>
<span>  truth <span class="op">=</span> <span class="va">response</span>,</span>
<span>  estimate <span class="op">=</span> <span class="va">predictions</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 3</span></span></span>
<span><span class="co">#&gt;   .metric               .estimator .estimate</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> agreement_coefficient standard       0.664</span></span>
<span></span>
<span><span class="fu"><a href="../reference/ww_agreement_coefficient.html">ww_agreement_coefficient_vec</a></span><span class="op">(</span></span>
<span>  truth <span class="op">=</span> <span class="va">worldclim_simulation</span><span class="op">$</span><span class="va">response</span>,</span>
<span>  estimate <span class="op">=</span> <span class="va">worldclim_simulation</span><span class="op">$</span><span class="va">predictions</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.6643328</span></span></code></pre></div>
<p>Some of these additional metrics are implemented by wrapping
functions from the <a href="https://r-spatial.github.io/spdep/" class="external-link">spdep</a> package:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/global_geary_c.html">ww_global_geary_c</a></span><span class="op">(</span></span>
<span>  <span class="va">worldclim_simulation</span>,</span>
<span>  truth <span class="op">=</span> <span class="va">response</span>,</span>
<span>  estimate <span class="op">=</span> <span class="va">predictions</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 3</span></span></span>
<span><span class="co">#&gt;   .metric        .estimator .estimate</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> global_geary_c standard      0.062<span style="text-decoration: underline;">1</span></span></span></code></pre></div>
<p>These functions rely on calculating the spatial neighbors of each
observation. The waywiser package will automatically use
<code><a href="../reference/ww_build_weights.html">ww_build_weights()</a></code> to calculate these, if not provided, but
this is often not desirable. For that reason, these functions all have a
<code>wt</code> argument, which can take either pre-calculated weights
or a function that will create spatial weights:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/global_geary_c.html">ww_global_geary_c</a></span><span class="op">(</span></span>
<span>  <span class="va">worldclim_simulation</span>,</span>
<span>  truth <span class="op">=</span> <span class="va">response</span>,</span>
<span>  estimate <span class="op">=</span> <span class="va">predictions</span>,</span>
<span>  wt <span class="op">=</span> <span class="fu"><a href="../reference/ww_build_weights.html">ww_build_weights</a></span><span class="op">(</span><span class="va">worldclim_simulation</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 3</span></span></span>
<span><span class="co">#&gt;   .metric        .estimator .estimate</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> global_geary_c standard      0.062<span style="text-decoration: underline;">1</span></span></span>
<span></span>
<span><span class="fu"><a href="../reference/global_geary_c.html">ww_global_geary_c</a></span><span class="op">(</span></span>
<span>  <span class="va">worldclim_simulation</span>,</span>
<span>  truth <span class="op">=</span> <span class="va">response</span>,</span>
<span>  estimate <span class="op">=</span> <span class="va">predictions</span>,</span>
<span>  wt <span class="op">=</span> <span class="va">ww_build_weights</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 3</span></span></span>
<span><span class="co">#&gt;   .metric        .estimator .estimate</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> global_geary_c standard      0.062<span style="text-decoration: underline;">1</span></span></span></code></pre></div>
<p>Because these are yardstick metrics, they can be used with
<code><a href="https://yardstick.tidymodels.org/reference/metric_set.html" class="external-link">yardstick::metric_set()</a></code> and other tidymodels
infrastructure:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">yardstick</span><span class="fu">::</span><span class="fu"><a href="https://yardstick.tidymodels.org/reference/metric_set.html" class="external-link">metric_set</a></span><span class="op">(</span></span>
<span>  <span class="va">ww_agreement_coefficient</span>,</span>
<span>  <span class="va">ww_global_geary_c</span></span>
<span><span class="op">)</span><span class="op">(</span><span class="va">worldclim_simulation</span>,</span>
<span>  truth <span class="op">=</span> <span class="va">response</span>,</span>
<span>  estimate <span class="op">=</span> <span class="va">predictions</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 3</span></span></span>
<span><span class="co">#&gt;   .metric               .estimator .estimate</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> agreement_coefficient standard      0.664 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> global_geary_c        standard      0.062<span style="text-decoration: underline;">1</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="multi-scale-model-assessment">Multi-scale model assessment<a class="anchor" aria-label="anchor" href="#multi-scale-model-assessment"></a>
</h2>
<p>A common pattern with spatial models is that you need to predict
observation units – pixels of a raster or individual points – which will
be aggregated to arbitrary scales, such as towns or parcel boundaries.
Because errors can be spatially distributed, or can either compound or
counteract each other when aggregated, <a href="https://doi.org/10.1016/j.rse.2010.05.010" class="external-link">some assessment
protocols</a> recommend assessing model predictions aggregated to
multiple scales.</p>
<p>The <code><a href="../reference/ww_multi_scale.html">ww_multi_scale()</a></code> function helps automate this
process. The interface for this function works similarly to that for
yardstick metrics – you provide your data, your true values, and your
estimate – except you also must provide instructions for how to
aggregate your data. This can take the form of providing information on
how to build standardized grids, by passing arguments that will be used
by <code><a href="https://r-spatial.github.io/sf/reference/st_make_grid.html" class="external-link">sf::st_make_grid()</a></code>, or by passing polygons directly:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ww_multi_scale.html">ww_multi_scale</a></span><span class="op">(</span></span>
<span>  <span class="va">worldclim_simulation</span>,</span>
<span>  truth <span class="op">=</span> <span class="va">response</span>,</span>
<span>  estimate <span class="op">=</span> <span class="va">predictions</span>,</span>
<span>  metrics <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">ww_agreement_coefficient</span>, <span class="fu">yardstick</span><span class="fu">::</span><span class="va"><a href="https://yardstick.tidymodels.org/reference/rmse.html" class="external-link">rmse</a></span><span class="op">)</span>,</span>
<span>  n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">4</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 4 × 6</span></span></span>
<span><span class="co">#&gt;   .metric               .estimator .estimate .grid_args       .grid  .notes  </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> agreement_coefficient standard      0.187  <span style="color: #949494;">&lt;tibble [1 × 1]&gt;</span> &lt;sf&gt;   &lt;tibble&gt;</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> rmse                  standard      0.033<span style="text-decoration: underline;">0</span> <span style="color: #949494;">&lt;tibble [1 × 1]&gt;</span> &lt;sf&gt;   &lt;tibble&gt;</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> agreement_coefficient standard      0.852  <span style="color: #949494;">&lt;tibble [1 × 1]&gt;</span> &lt;sf&gt;   &lt;tibble&gt;</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> rmse                  standard      0.050<span style="text-decoration: underline;">2</span> <span style="color: #949494;">&lt;tibble [1 × 1]&gt;</span> &lt;sf&gt;   &lt;tibble&gt;</span></span>
<span></span>
<span><span class="va">grid</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_make_grid.html" class="external-link">st_make_grid</a></span><span class="op">(</span><span class="va">worldclim_simulation</span>, n <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/ww_multi_scale.html">ww_multi_scale</a></span><span class="op">(</span></span>
<span>  <span class="va">worldclim_simulation</span>,</span>
<span>  truth <span class="op">=</span> <span class="va">response</span>,</span>
<span>  estimate <span class="op">=</span> <span class="va">predictions</span>,</span>
<span>  metrics <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">ww_agreement_coefficient</span>, <span class="fu">yardstick</span><span class="fu">::</span><span class="va"><a href="https://yardstick.tidymodels.org/reference/rmse.html" class="external-link">rmse</a></span><span class="op">)</span>,</span>
<span>  grids <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">grid</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 6</span></span></span>
<span><span class="co">#&gt;   .metric               .estimator .estimate .grid_args       .grid  .notes  </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> agreement_coefficient standard      0.183  <span style="color: #949494;">&lt;tibble [0 × 0]&gt;</span> &lt;sf&gt;   &lt;tibble&gt;</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> rmse                  standard      0.032<span style="text-decoration: underline;">9</span> <span style="color: #949494;">&lt;tibble [0 × 0]&gt;</span> &lt;sf&gt;   &lt;tibble&gt;</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="area-of-applicability">Area of Applicability<a class="anchor" aria-label="anchor" href="#area-of-applicability"></a>
</h2>
<p>Last but not least, we can also see if there’s any areas in our data
that are too different from our training data for us to safely predict
on, which fall outside the “area of applicability” defined by <a href="https://doi.org/10.1111/2041-210X.13650" class="external-link">Meyer and Pebesma
(2021)</a>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">worldclim_aoa</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ww_area_of_applicability.html">ww_area_of_applicability</a></span><span class="op">(</span></span>
<span>  <span class="va">response</span> <span class="op">~</span> <span class="va">bio2</span> <span class="op">+</span> <span class="va">bio10</span> <span class="op">+</span> <span class="va">bio13</span> <span class="op">+</span> <span class="va">bio19</span>,</span>
<span>  <span class="va">worldclim_simulation</span>,</span>
<span>  importance <span class="op">=</span> <span class="fu">vip</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/vip/man/vi_model.html" class="external-link">vi_model</a></span><span class="op">(</span><span class="va">worldclim_model</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">worldclim_aoa</span></span>
<span><span class="co">#&gt; # Predictors:</span></span>
<span><span class="co">#&gt;    4</span></span>
<span><span class="co">#&gt; Area-of-applicability threshold:</span></span>
<span><span class="co">#&gt;    0.0915347</span></span></code></pre></div>
<p>The objects returned by <code><a href="../reference/ww_area_of_applicability.html">ww_area_of_applicability()</a></code> are
models in their own right, which can be used by functions such as
<code><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict()</a></code> to calculate if new observations are in the area
of applicability of a model.</p>
</div>
<div class="section level2">
<h2 id="feature-matrix">Feature Matrix<a class="anchor" aria-label="anchor" href="#feature-matrix"></a>
</h2>
<p>Below is a table of the major statistical functions waywiser
provides, alongside brief descriptions and journal references for each.
For a complete list of package functions, check out the <a href="https://mikemahoney218.github.io/waywiser/reference/index.html">package
reference page</a>.</p>
<table class="table table table-striped table-hover" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:left;">
Function
</th>
<th style="text-align:left;">
Description
</th>
<th style="text-align:left;">
Category
</th>
<th style="text-align:left;">
Reference
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
ww_area_of_applicability()
</td>
<td style="text-align:left;">
Calculate the ‘area of applicability’ of a model
</td>
<td style="text-align:left;">
AOA
</td>
<td style="text-align:left;">
H. Meyer and E. Pebesma. 2021. Predicting into unknown space? Estimating
the area of applicability of spatial prediction models, Methods in
Ecology and Evolution 12(9), pp 1620 - 1633, doi:
10.1111/2041-210X.13650.
</td>
</tr>
<tr>
<td style="text-align:left;">
ww_multi_scale()
</td>
<td style="text-align:left;">
Calculate model metrics for predictions aggregated to multiple levels
</td>
<td style="text-align:left;">
Multi-scale assessment
</td>
<td style="text-align:left;">
Riemann, R., Wilson, B. T., Lister, A., and Parks, S. (2010) An
effective assessment protocol for continuous geospatial datasets of
forest characteristics using USFS Forest Inventory and Analysis (FIA)
data. Remote Sensing of Environment 114(10), pp 2337-2352, doi:
10.1016/j.rse.2010.05.010.
</td>
</tr>
<tr>
<td style="text-align:left;">
ww_global_moran_i() (plus _vec and _pvalue variants)
</td>
<td style="text-align:left;">
Calculate Moran’s I
</td>
<td style="text-align:left;">
Spatial yardstick metrics
</td>
<td style="text-align:left;">
Moran, P.A.P. (1950). Notes on Continuous Stochastic Phenomena.
Biometrika, 37(1/2), pp 17. doi: 10.2307/2332142; Cliff, A. D., Ord, J.
K. 1981 Spatial processes, Pion, p. 17.
</td>
</tr>
<tr>
<td style="text-align:left;">
ww_local_moran_i() (plus _vec and _pvalue variants)
</td>
<td style="text-align:left;">
Calculate local Moran’s I (Anselin’s LISA)
</td>
<td style="text-align:left;">
Spatial yardstick metrics
</td>
<td style="text-align:left;">
Anselin, L. 1995. Local indicators of spatial association, Geographical
Analysis, 27, pp 93–115. doi: 10.1111/j.1538-4632.1995.tb00338.x. Sokal,
R. R, Oden, N. L. and Thomson, B. A. 1998. Local Spatial Autocorrelation
in a Biological Model. Geographical Analysis, 30, pp 331–354. doi:
10.1111/j.1538-4632.1998.tb00406.x
</td>
</tr>
<tr>
<td style="text-align:left;">
ww_global_geary_c() (plus _vec and _pvalue variants)
</td>
<td style="text-align:left;">
Calculate Geary’s C
</td>
<td style="text-align:left;">
Spatial yardstick metrics
</td>
<td style="text-align:left;">
Geary, R. C. (1954). The Contiguity Ratio and Statistical Mapping. The
Incorporated Statistician. 5 (3): 115–145. doi: 10.2307/2986645; Cliff,
A. D., Ord, J. K. 1981 Spatial processes, Pion, p. 17.
</td>
</tr>
<tr>
<td style="text-align:left;">
ww_local_geary_c() (plus _vec and _pvalue variants)
</td>
<td style="text-align:left;">
Calculate local Geary’s C
</td>
<td style="text-align:left;">
Spatial yardstick metrics
</td>
<td style="text-align:left;">
Anselin, L. 1995. Local indicators of spatial association, Geographical
Analysis, 27, pp 93–115. doi: 10.1111/j.1538-4632.1995.tb00338.x.
Anselin, L. 2019. A Local Indicator of Multivariate Spatial Association:
Extending Geary’s C. Geographical Analysis, 51, pp 133-150. doi:
10.1111/gean.12164
</td>
</tr>
<tr>
<td style="text-align:left;">
ww_local_getis_ord_g() (plus _vec and _pvalue variants)
</td>
<td style="text-align:left;">
Calculate local Getis-Ord G and G*
</td>
<td style="text-align:left;">
Spatial yardstick metrics
</td>
<td style="text-align:left;">
Ord, J. K. and Getis, A. 1995. Local spatial autocorrelation statistics:
distributional issues and an application. Geographical Analysis, 27,
286–306. doi: 10.1111/j.1538-4632.1995.tb00912.x
</td>
</tr>
<tr>
<td style="text-align:left;">
ww_agreement_coefficient(), ww_systematic_agreement_coefficient(),
ww_systematic_mpd(), ww_systematic_rmpd() (plus unsystematic and _vec
variants)
</td>
<td style="text-align:left;">
Calculate agreement coefficients and related metrics
</td>
<td style="text-align:left;">
Yardstick metrics
</td>
<td style="text-align:left;">
Ji, L. and Gallo, K. 2006. An Agreement Coefficient for Image
Comparison. Photogrammetric Engineering &amp; Remote Sensing 72(7), pp
823–833, doi: 10.14358/PERS.72.7.823.
</td>
</tr>
<tr>
<td style="text-align:left;">
ww_willmott_d(), ww_willmott_dr(), ww_systematic_mse(),
ww_systematic_rmse() (plus unsystematic and _vec variants)
</td>
<td style="text-align:left;">
Calculate Willmott’s d and related metrics
</td>
<td style="text-align:left;">
Yardstick metrics
</td>
<td style="text-align:left;">
Willmott, C. J. 1981. On the Validation of Models. Physical Geography
2(2), pp 184-194, doi: 10.1080/02723646.1981.10642213; Willmott, C. J.
1982. Some Comments on the Evaluation of Model Performance. Bulletin of
the American Meteorological Society 63(11), pp 1309-1313, doi:
10.1175/1520-0477(1982)063&lt;1309:SCOTEO&gt;2.0.CO;2.; Willmott, C. J.,
Robeson, S. M., and Matsuura, K. A refined index of model performance.
International Journal of Climatology 32, pp 2088-2094, doi:
10.1002/joc.2419.
</td>
</tr>
</tbody>
</table>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://www.mm218.dev/" class="external-link">Michael Mahoney</a>, <a href="https://www.rstudio.com" class="external-link"><img src="https://www.tidyverse.org/rstudio-logo.svg" alt="RStudio" width="72"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
